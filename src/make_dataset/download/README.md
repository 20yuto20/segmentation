# downloadディレクトリの中身について
**各ファイル内の絶対パスは適宜書き換えてください**

## 構成（シェルスクリプトは除く）
- download.py
- merge.py
- conc.py

## download.pyについて
### 概要
このファイルは `root_dir`配下に以下のデータセットをインターネットから拾ってきて、任意のディレクトリ構造にするものである。
- PASCAL VOC2012（train , validation用）
- PASCAL VOC2007（test用）
- Semantic Boundary Dataset（train, validation用でデータの水増し）

### 詳細
PASCAL VOCは公式ホームページから取得して解凍するようになっている。
一方でSBDは公式ホームページのリンクが削除されているのでPytorchの `torchvision.datasets.SBDataset`　を用いて取得するようにしている。
また `tqdm` を使用してダウンロードの状況が逐次的にわかるようにしている。
データセットがダウンロードできたらSBDとPASCAL VOC2012を統合してデータ数を水増ししている。これは先行研究を参考にしている。

## merge.pyについて
###　概要
SBDはラベルの形式が `.mat`拡張子なのに対して統合先のPASCAL VOC2012は `.png`拡張子となっている。そこでこれを `.png`に統一するためにこのコードを動かす。

### 詳細
- ファイル形式の違い:

VOCのラベルは.png形式
SBDのラベルは.mat形式


- SBDデータの構造:

clsディレクトリには、カテゴリ別のセグメンテーションとバウンダリが.mat形式で保存されています。
各.matファイルにはGTclsという構造体が含まれており、セグメンテーション情報が格納されています。


- 正しい統合方法:

SBDの.matファイルをそのままVOC2012のディレクトリ構造にコピーするのではなく、.matファイルから情報を抽出し、VOC2012と互換性のある.png形式に変換する必要があります。


- トレーニングとバリデーションの分割:

SBDのtrain.txtとval.txtを使用して、トレーニングセットとバリデーションセットを決定します。



- 修正したアプローチ:

SBDの.matファイルを読み込み、セグメンテーション情報を抽出します。
抽出したセグメンテーション情報を.png形式で保存します。
これらの新しく生成された.pngファイルを、VOC2012の構造内の新しいディレクトリ（例：SegmentationClassAug）に保存します。
SBDのtrain.txtとval.txtをVOC2012のディレクトリ構造内にコピーします。

## conc.pyについて
### 概要
SBDとVOCのそれぞれの画像とラベルとtxtファイルの統合

### 詳細
1. 画像のディレクトリの統合
2. ラベルのディレクトリの統合
3. splitファイルの統合
4. 画像とラベルが一対一対応かのテストおよびデバッグのコード